(this["webpackJsonpname-app"]=this["webpackJsonpname-app"]||[]).push([[0],{135:function(e,t){},189:function(e,t,n){e.exports=n(340)},198:function(e,t){},209:function(e,t){},211:function(e,t){},258:function(e,t){},328:function(e,t){},340:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,a=n(0),c=n.n(a),o=n(12),l=n.n(o),i={httpUrl:"https://lcd.demo.cosmwasm.com",faucetUrl:"https://faucet.demo.cosmwasm.com/credit",codeId:2},u=n(17),s=function(e){r=e.error};function m(e){console.log("Set error: ".concat(e));var t="string"===typeof e?e:e.toString();s({error:t})}function d(){console.log("Clear error"),s({})}var f=a.createContext({setError:m,clearError:d}),p=function(){return a.useContext(f)};function v(e){console.log("Re-render ErrorProvider");var t=a.useState({}),n=Object(u.a)(t,2),c=n[0],o=n[1];s=o,r&&(o({error:r}),r=void 0);var l={error:c.error,setError:m,clearError:d};return a.createElement(f.Provider,{value:l},e.children)}var E=n(8),h=n.n(E),g=n(21),b=n(176),y=n(49),w=n(41);function x(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var n=w.Bip39.encode(w.Random.getBytes(16)).toString();return localStorage.setItem(e,n),n}function j(){return O.apply(this,arguments)}function O(){return(O=Object(g.a)(h.a.mark((function e(){var t,n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(),e.next=3,y.Secp256k1Pen.fromMnemonic(t);case 3:return n=e.sent,r=Object(y.encodeSecp256k1Pubkey)(n.pubkey),a=Object(y.encodeAddress)(r,"cosmos"),c=function(e){return n.sign(e)},e.abrupt("return",{address:a,signer:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(g.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.address,a=n.signer,c=new y.SigningCosmWasmClient(t,r,a),e.abrupt("return",{address:r,client:c});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={loading:!0,address:"",getClient:function(){throw new Error("not yet initialized")},getRestClient:function(){throw new Error("not yet initialized")}},k=a.createContext(S),U=function(){return a.useContext(k)};function _(e){return a.createElement(A,{config:e.config,loadWallet:j},e.children)}function A(e){var t=Object(a.useState)(S),n=Object(u.a)(t,2),r=n[0],c=n[1],o=p().setError,l=e.config,i=e.loadWallet;return Object(a.useEffect)((function(){i().then((function(e){return function(e,t){return C.apply(this,arguments)}(l.httpUrl,e)})).then(function(){var e=Object(g.a)(h.a.mark((function e(t){var n,r,a,o,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.address,r=t.client,!l.faucetUrl){e.next=11;break}return e.next=4,r.getAccount();case 4:if(null===(o=e.sent)||void 0===o?void 0:null===(a=o.coins)||void 0===a?void 0:a.length){e.next=11;break}return console.log("Hitting faucet"),e.next=9,b.a.post(l.faucetUrl,{json:{ticker:"COSM",address:n}});case 9:i=e.sent,console.log(i);case 11:u=new y.RestClient(l.httpUrl),c({loading:!1,address:n,getClient:function(){return r},getRestClient:function(){return u}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(o)}),[l.httpUrl,l.faucetUrl,i,o]),a.createElement(k.Provider,{value:r},e.children)}var R=n(375),W=n(372),B=Object(W.a)({root:{background:"#2196f3",color:"white"}});function F(e){var t=B();return a.createElement(R.a,Object.assign({className:t.root},e))}var I=n(82);function N(e){var t=e.error,n=e.clearError;return console.log("Render ErrorMessage"),a.createElement(I.a,{color:"secondary",variant:"h6",onClick:n},"Error: ",t)}var P=n(377),T=n(378),M=n(379),q=n(388),D=n(56);function J(e){var t=e.account,n=t?t.coins.map((function(e){var t=e.amount,n=e.denom;return"".concat(t," ").concat(n)})).join(", ")||"(Empty Account)":"(Loading Balance)",r=t?t.address:"(No Address)";return a.createElement(a.Fragment,null,a.createElement(P.a,null,a.createElement(T.a,null,a.createElement(D.b,{to:"/"},a.createElement(M.a,{edge:"start",color:"inherit"},a.createElement(q.a,null))),a.createElement(I.a,{variant:"h6"},r," - ",n))),a.createElement(T.a,null))}function L(){return a.createElement(I.a,{variant:"h2"},"Loading Wallet...")}function z(e){var t=e.children;return a.createElement(a.Fragment,null,t)}var H=function(){var e=p(),t=e.error,n=e.clearError;return t?a.createElement(N,{error:t,clearError:n}):a.createElement("div",null)};var Y=function(e){return U().loading?a.createElement(a.Fragment,null,a.createElement(L,null),a.createElement(H,null)):a.createElement(z,null,e.children)},$=n(25),G=n(35),K=n(383),Q=n(387),V=n(179),X=n.n(V),Z=n(380),ee=n(381),te=n(382);function ne(e){var t=e.address,n=e.init_msg.name;return a.createElement(D.b,{to:"/contract/".concat(t)},a.createElement(Z.a,null,a.createElement(ee.a,null,a.createElement(Q.a,null,a.createElement(X.a,null))),a.createElement(te.a,{primary:n,secondary:t})))}var re=i.codeId;function ae(){return(ae=Object(g.a)(h.a.mark((function e(t,n){var r,a,c,o,l,i,u,s,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,t.listContractAddresses();case 3:a=e.sent,c=!0,o=!1,l=void 0,e.prev=7,i=a[Symbol.iterator]();case 9:if(c=(u=i.next()).done){e.next=18;break}return s=u.value,e.next=13,t.getContractInfo(s);case 13:(m=e.sent).code_id===n&&r.push(Object(G.a)({},m,{address:s}));case 15:c=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),o=!0,l=e.t0;case 24:e.prev=24,e.prev=25,c||null==i.return||i.return();case 27:if(e.prev=27,!o){e.next=30;break}throw l;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[7,20,24,32],[25,,27,31]])})))).apply(this,arguments)}var ce=function(){var e=U().getRestClient,t=p().setError,n=a.useState({contracts:[]}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){(function(e,t){return ae.apply(this,arguments)})(e(),re).then((function(e){return o({contracts:e})})).catch(t)}),[e,t]),a.createElement(K.a,null,c.contracts.map((function(e){return a.createElement(ne,Object.assign({},e,{key:e.address}))})))};var oe=function(){var e=U().getClient,t=p().setError,n=a.useState({}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){e().getAccount().then((function(e){return o({account:e})})).catch(t)}),[e,t]),a.createElement(J,c)},le=n(20);function ie(e){return e?"".concat(e.amount," ").concat(e.denom):"0"}function ue(e){return a.createElement(a.Fragment,null,a.createElement(I.a,{variant:"h5"},'Details of name service "',e.init_msg.name,'":'),a.createElement("ul",null,a.createElement("li",null,"Code ID: ",e.code_id),a.createElement("li",null,"Address: ",e.address),a.createElement("li",null,"Purchase price: ",ie(e.init_msg.purchase_price)),a.createElement("li",null,"Transfer price: ",ie(e.init_msg.transfer_price))))}var se=n(385),me=n(57),de=n(2),fe=n(384),pe=function(e){var t=e.name,n=e.form,r=e.validate,c=e.onChanged,o=Object(de.a)(e,["name","form","validate","onChanged"]),l=Object(me.a)(t,n,r),i=l.input,u=l.meta,s=u.error&&(u.touched||!u.pristine);return a.createElement(fe.a,Object.assign({error:s,name:i.name,value:i.value,helperText:s?u.error:void 0,onChange:function(e){i.onChange(e),c&&c(e)},margin:"normal"},o))},ve=function(e){return function(t){if(t&&t.length<e)return"Must be longer than ".concat(e," characters")}};function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var a=!0,c=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var u=(0,l.value)(e,n,r);if(u)return u}}catch(s){c=!0,o=s}finally{try{a||null==i.return||i.return()}finally{if(c)throw o}}}}var he=function(e){return e?void 0:"Required"},ge=function(e){var t=Object(me.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,r=t.handleSubmit,c=t.submitting,o=t.invalid,l=Object(a.useMemo)((function(){return Ee(he,ve(45))}),[]);return a.createElement("form",{onSubmit:r},a.createElement(se.a,{display:"block",marginTop:2,marginBottom:1},a.createElement(pe,{label:"New Owner",placeholder:"cosmos1234567...",type:"text",form:n,required:!0,fullWidth:!0,name:"addressField",validate:l})),a.createElement(se.a,{width:120,display:"flex",justifyContent:"space-between"},a.createElement(F,{fullWidth:!0,color:"primary",type:"submit",disabled:o||c},"Transfer")))};function be(e){var t=U(),n=t.address,r=t.getClient,c=p().setError,o=function(){var t=Object(g.a)(h.a.mark((function t(){var a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.contract.purchase_price,o=a?[a]:void 0,console.log("buying"),t.prev=3,t.next=6,r().execute(e.contractAddress,{register:{name:e.name}},"Buying my name",o);case 6:console.log("Purchased"),e.onUpdate&&e.onUpdate(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),c(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(g.a)(h.a.mark((function t(n){var a,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.contract.transfer_price,o=a?[a]:void 0,l=n.addressField,console.log("transfering"),t.prev=4,t.next=7,r().execute(e.contractAddress,{transfer:{name:e.name,to:l}},"Transferring my name",o);case 7:console.log("Transferred"),e.onUpdate&&e.onUpdate(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),c(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}();return e.owner?e.owner===n?a.createElement("div",null,a.createElement(I.a,{color:"secondary",variant:"h6"},"You own ",e.name),a.createElement("span",null,"Do you want to transfer it?"),a.createElement(ge,{onSubmit:l})):a.createElement("div",null,a.createElement(I.a,{color:"secondary",variant:"h6"},e.name," is owned"),a.createElement("span",null,"Owned by: ",e.owner)):a.createElement("div",null,a.createElement(I.a,{variant:"h6"},e.name," is free"),a.createElement(F,{color:"primary",type:"submit",onClick:o},"Buy"))}var ye=function(e){var t=Object(me.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,r=t.handleSubmit,c=t.submitting,o=t.invalid,l=Object(a.useMemo)((function(){return Ee(he,ve(4))}),[]);return a.createElement("form",{onSubmit:r},a.createElement(se.a,{display:"block",marginTop:2,marginBottom:1},a.createElement(pe,{label:"Name",placeholder:"Name",type:"text",form:n,required:!0,fullWidth:!0,name:"nameField",validate:l})),a.createElement(se.a,{width:120,display:"flex",justifyContent:"space-between"},a.createElement(F,{color:"primary",fullWidth:!0,type:"submit",disabled:o||c},"Search")))},we={address:"",code_id:0,creator:"",init_msg:{name:""}};var xe=function(e){var t=e.address,n=U(),r=n.getClient,c=n.getRestClient,o=p().setError,l=a.useState(we),i=Object(u.a)(l,2),s=i[0],m=i[1],d=a.useState({loading:!1}),f=Object(u.a)(d,2),v=f[0],E=f[1];return a.useEffect((function(){c().getContractInfo(t).then((function(e){return m(Object(G.a)({},e,{address:t}))})).catch(o)}),[c,o,t]),a.useEffect((function(){v.name&&r().queryContractSmart(t,{resolverecord:{name:v.name}}).then((function(e){var t,n=(t=e,JSON.parse(le.Encoding.fromUtf8(t)));E({name:v.name,owner:n.address,loading:!1})})).catch((function(e){e.toString().includes("NameRecord not found")?E({name:v.name,loading:!1}):(E({loading:!1}),o(e))}))}),[r,o,t,v.name]),a.createElement("div",null,a.createElement(ue,s),a.createElement(ye,{onSubmit:function(e){E({name:e.nameField,loading:!0})}}),a.createElement("hr",null),v.name?v.loading?a.createElement("div",null,"Loading..."):a.createElement(be,{contractAddress:t,name:v.name,owner:v.owner,contract:s.init_msg,onUpdate:function(e){E(Object(G.a)({},v,{owner:e}))}}):"")};var je,Oe=function(){var e=Object($.f)().address;return c.a.createElement(xe,{address:e||""})},Ce=function(){return c.a.createElement(D.a,{basename:"/"},c.a.createElement(oe,null),c.a.createElement(H,null),c.a.createElement($.c,null,c.a.createElement($.a,{exact:!0,path:"/",component:ce}),c.a.createElement($.a,{path:"/contract/:address",component:Oe})))},Se=document.getElementById("root");je=Ce,l.a.render(c.a.createElement(v,null,c.a.createElement(_,{config:i},c.a.createElement(Y,null,c.a.createElement(je,null)))),Se),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.3feb38bb.chunk.js.map