(this["webpackJsonpname-app"]=this["webpackJsonpname-app"]||[]).push([[0],{187:function(e,t){},246:function(e,t,n){e.exports=n(406)},250:function(e,t,n){},256:function(e,t){},267:function(e,t){},269:function(e,t){},316:function(e,t){},406:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,a=n(0),c=n.n(a),o=n(12),l=n.n(o),i=(n(250),{httpUrl:"https://lcd.demo-07.cosmwasm.com",faucetUrl:"https://faucet.demo-07.cosmwasm.com/credit",codeId:2}),s=n(21),u=function(e){r=e.error};function d(e){console.log("Set error: ".concat(e));var t="string"===typeof e?e:e.toString();u({error:t})}function m(){console.log("Clear error"),u({})}var p=a.createContext({setError:d,clearError:m}),f=function(){return a.useContext(p)};function b(e){console.log("Re-render ErrorProvider");var t=a.useState({}),n=Object(s.a)(t,2),c=n[0],o=n[1];u=o,r&&(o({error:r}),r=void 0);var l={error:c.error,setError:d,clearError:m};return a.createElement(p.Provider,{value:l},e.children)}var g=n(7),h=n.n(g),v=n(22),E=n(232),x=n(104),w=n(55);function y(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var n=w.Bip39.encode(w.Random.getBytes(16)).toString();return localStorage.setItem(e,n),n}function S(){return j.apply(this,arguments)}function j(){return(j=Object(v.a)(h.a.mark((function e(){var t,n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,x.Secp256k1Pen.fromMnemonic(t);case 3:return n=e.sent,r=Object(x.encodeSecp256k1Pubkey)(n.pubkey),a=Object(x.pubkeyToAddress)(r,"cosmos"),c=function(e){return n.sign(e)},e.abrupt("return",{address:a,signer:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(v.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.address,a=n.signer,c=new x.SigningCosmWasmClient(t,r,a),e.abrupt("return",{address:r,client:c});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={loading:!0,address:"",getClient:function(){throw new Error("not yet initialized")}},C=a.createContext(k),N=function(){return a.useContext(C)};function A(e){return a.createElement(B,{config:e.config,loadWallet:S},e.children)}function B(e){var t=Object(a.useState)(k),n=Object(s.a)(t,2),r=n[0],c=n[1],o=f().setError,l=e.config,i=e.loadWallet;return Object(a.useEffect)((function(){i().then((function(e){return function(e,t){return O.apply(this,arguments)}(l.httpUrl,e)})).then(function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.address,r=t.client,!l.faucetUrl){e.next=11;break}return e.next=4,r.getAccount();case 4:if(null===(o=e.sent)||void 0===o?void 0:null===(a=o.balance)||void 0===a?void 0:a.length){e.next=11;break}return console.log("Hitting faucet"),e.next=9,E.a.post(l.faucetUrl,{json:{ticker:"COSM",address:n}});case 9:i=e.sent,console.log(i);case 11:c({loading:!1,address:n,getClient:function(){return r}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(o)}),[l.httpUrl,l.faucetUrl,i,o]),a.createElement(C.Provider,{value:r},e.children)}var F=n(441),T=n(438),R=Object(T.a)({root:{height:"40px",width:"100%",background:"#ebf5fc",border:"none",outline:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"20px",fontWeight:500,color:"#3d5af1",boxShadow:"-2px -2px 6px rgba(255, 255, 255, 1), 2px 2px 6px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"-2px -2px 6px rgba(255, 255, 255, 1), 2px 2px 6px rgba(0, 0, 0, 0.1)",background:"#ebf5fc"},"&:active":{boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1)",background:"#ebf5fc"}}});function W(e){var t=R();return a.createElement(F.a,Object.assign({disableElevation:!0,disableFocusRipple:!0,disableRipple:!0,className:t.root},e))}var I=n(131);function U(e){var t=e.error,n=e.clearError;return console.log("Render ErrorMessage"),a.createElement(I.a,{color:"secondary",variant:"h6",onClick:n},"Error: ",t)}var M=n(444),P=n(445),D=n(446),q=n(443),L=n(455),_=n(69);function z(e){var t=e.children,n=Object(q.a)({disableHysteresis:!0,threshold:0});return a.cloneElement(t,{elevation:n?4:0})}function J(e,t){var n=e.account,r=(e.children,n?n.balance.map((function(e){var t=e.amount,n=e.denom;return"".concat(t," ").concat(n)})).join(", ")||"(Empty Account)":"(Loading Balance)"),c=n?n.address:"(No Address)";return a.createElement(a.Fragment,null,a.createElement(z,t,a.createElement(M.a,null,a.createElement(P.a,null,a.createElement(_.b,{to:"/"},a.createElement(D.a,{edge:"start",color:"inherit"},a.createElement(L.a,null))),a.createElement(I.a,{variant:"h6"},c," - ",r)))),a.createElement(P.a,null))}function H(){return a.createElement(I.a,{variant:"h2"},"Loading Wallet...")}var V=n(447),G=Object(T.a)({root:{flexGrow:1,height:"100vh",background:"#ebf5fc"}});function Y(e){var t=e.children,n=G();return a.createElement(V.a,{className:n.root,container:!0,spacing:3},a.createElement(V.a,{item:!0,xs:2}),a.createElement(V.a,{item:!0,xs:!0},t),a.createElement(V.a,{item:!0,xs:2}))}var $=Object(T.a)({card:{width:"60vw",margin:"40px 20px",padding:"30px 40px",background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px",maxWidth:"600px","& ul":{listStyleType:"none",padding:"0"},"& li":{display:"grid",gridTemplateColumns:"20% 80%"},"& li p:first-child":{color:"#3d5af1"}},listCardContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},listCard:{width:"60vw",margin:"20px",padding:"30px 40px",borderRadius:"116px",background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"inset -5px -5px 10px rgba(255,255,255,0.5), inset 5px 5px 10px rgba(0,0,0,0.05)"}},link:{textDecoration:"none",color:"#3d5af1"},form:{height:"115px",display:"flex",flexDirection:"column",justifyContent:"space-between",maxWidth:"600px"},input:{display:"flex","& input":{height:"30px",width:"100%",background:"#ebf5fc",border:"none",outline:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"18px",color:"#3d5af1",boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1);"}},isFree:{color:"#00BB6D",marginBottom:"20px",paddingLeft:"8px"},isOwned:{color:"#ff304f",marginBottom:"20px",paddingLeft:"8px"},bottomSpacer:{marginBottom:"8px"}});var K=function(){var e=f(),t=e.error,n=e.clearError;return t?a.createElement(U,{error:t,clearError:n}):a.createElement("div",null)};var Q=function(e){return N().loading?a.createElement(a.Fragment,null,a.createElement(H,null),a.createElement(K,null)):a.createElement(Y,null,e.children)},X=n(25),Z=n(451),ee=n(454),te=n(235),ne=n.n(te),re=n(448),ae=n(449),ce=n(450);function oe(e){var t=e.address,n=e.label,r=$();return a.createElement("div",{className:r.listCardContainer},a.createElement(_.b,{className:r.link,to:"/contract/".concat(t)},a.createElement(re.a,{className:r.listCard},a.createElement(ae.a,null,a.createElement(ee.a,null,a.createElement(ne.a,null))),a.createElement(ce.a,{primary:n,secondary:t}))))}var le=i.codeId;var ie=function(){var e=N().getClient,t=f().setError,n=a.useState([]),r=Object(s.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){e().getContracts(le).then((function(e){return o(e)})).catch(t)}),[e,t]),a.createElement(Z.a,null,c.map((function(e){return a.createElement(oe,Object.assign({},e,{key:e.address}))})))};var se=function(){var e=N().getClient,t=f().setError,n=a.useState({}),r=Object(s.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){e().getAccount().then((function(e){return o({account:e})})).catch(t)}),[e,t]),a.createElement(J,c)},ue=n(73);function de(e){return e?"".concat(e.amount," ").concat(e.denom):"0"}function me(e){var t=$();return a.createElement("div",{className:t.card},a.createElement(I.a,{variant:"h5"},'Details of name service "',e.label,'":'),a.createElement("ul",null,a.createElement("li",null,a.createElement("p",null,"Code ID:")," ",a.createElement("p",null,e.codeId)),a.createElement("li",null,a.createElement("p",null,"Address:")," ",a.createElement("p",null,e.address)),a.createElement("li",null,a.createElement("p",null,"Purchase price:")," ",a.createElement("p",null,de(e.initMsg.purchase_price))),a.createElement("li",null,a.createElement("p",null,"Transfer price:")," ",a.createElement("p",null,de(e.initMsg.transfer_price)))))}var pe=n(27),fe=n(64),be=n(2),ge=n(452),he=function(e){var t=e.type,n=e.placeholder,r=Object(be.a)(e,["type","placeholder"]),c=Object(fe.c)(r),o=Object(s.a)(c,2),l=o[0],i=o[1],u=i.error&&i.touched?i.error:"";return"number"===t?a.createElement(ge.a,Object.assign({id:"outlined-number",variant:"outlined",type:t,label:n},l,{helperText:u,error:!!u})):a.createElement(ge.a,Object.assign({type:t,placeholder:n,fullWidth:!0},l,{helperText:u,error:!!u}))},ve=n(105),Ee=ve.a().shape({name:ve.b().min(4,"Name can not be less than 4 characters").required("A Name is required")}),xe=ve.a().shape({addressField:ve.b().min(45,"Address invalid").required("An address is required")}),we=function(e){var t=e.handleTransfer,n=$();return a.createElement(fe.b,{initialValues:{addressField:""},validationSchema:xe,onSubmit:function(){var e=Object(v.a)(h.a.mark((function e(n,r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.addressField,(0,r.setSubmitting)(!0),t({addressField:a});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,r=e.isSubmitting;return a.createElement(fe.a,{onSubmit:t,className:n.form},a.createElement("div",{className:n.input},a.createElement(he,{placeholder:"cosmos1234567...",name:"addressField",type:"text"})),a.createElement("div",null,a.createElement(W,{type:"submit",disabled:r},"Transfer")))}))};function ye(e){var t=$(),n=e.name,r=e.contractAddress,c=N(),o=c.address,l=c.getClient,i=f().setError,u=a.useState({loading:!1}),d=Object(s.a)(u,2),m=d[0],p=d[1];a.useEffect((function(){p({loading:!0}),l().queryContractSmart(r,{resolverecord:{name:n}}).then((function(e){var t,n=(t=e,JSON.parse(pe.Encoding.fromUtf8(t)));p({owner:n.address,loading:!1})})).catch((function(e){p({loading:!1}),e.toString().includes("NameRecord not found")||i(e)}))}),[l,i,r,n]);var b=function(){var t=Object(v.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.contract.purchase_price,a=n?[n]:void 0,console.log("buying"),t.prev=3,t.next=6,l().execute(r,{register:{name:e.name}},"Buying my name",a);case 6:console.log("Purchased"),p({owner:o,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(v.a)(h.a.mark((function t(n){var r,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract.transfer_price,a=r?[r]:void 0,c=n.addressField,p({loading:!0}),console.log("transferring"),t.prev=5,t.next=8,l().execute(e.contractAddress,{transfer:{name:e.name,to:c}},"Transferring my name",a);case 8:console.log("Transferred"),p({owner:c,loading:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),p({loading:!1}),i(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}();return m.owner?m.owner===o?a.createElement("div",{className:t.card},a.createElement(I.a,{color:"secondary",variant:"h6"},"You own ",e.name),a.createElement(I.a,{className:t.bottomSpacer,variant:"body2"},"Do you want to transfer it?"),a.createElement(we,{handleTransfer:g})):a.createElement("div",{className:t.card},a.createElement(I.a,{color:"secondary",variant:"h6"},e.name," is owned"),a.createElement("span",null,"Owned by: ",m.owner)):a.createElement("div",{className:t.card},a.createElement(I.a,{className:t.isFree,variant:"h6"},e.name," is free"),a.createElement(W,{color:"primary",type:"submit",onClick:b},"Buy"))}var Se=function(e){var t=e.handleSearch,n=$();return a.createElement(fe.b,{initialValues:{name:""},validationSchema:Ee,onSubmit:function(){var e=Object(v.a)(h.a.mark((function e(n,r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.name,(0,r.setSubmitting)(!0),t({name:a});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,r=e.isSubmitting;return a.createElement(fe.a,{onSubmit:t,className:"".concat(n.card," ").concat(n.form)},a.createElement("div",{className:n.input},a.createElement(he,{placeholder:"Name",name:"name",type:"text"})),a.createElement("div",null,a.createElement(W,{type:"submit",disabled:r},"Search")))}))},je={address:"",codeId:0,creator:"",label:"",initMsg:{}};var Oe=function(e){var t=e.address,n=e.name,r=N().getClient,c=f().setError,o=Object(X.f)(),l=a.useState(je),i=Object(s.a)(l,2),u=i[0],d=i[1];return a.useEffect((function(){r().getContract(t).then((function(e){return d(Object(ue.a)({},e,{address:t}))})).catch(c)}),[c,t,r]),console.log("ContractLogic with ".concat(n)),a.createElement("div",null,a.createElement(me,u),a.createElement(Se,{handleSearch:function(e){var n=e.name;o.push("/contract/".concat(t,"/details/").concat(n))}}),n?a.createElement(ye,{contractAddress:t,name:n,contract:u.initMsg}):"")};var ke=function(){var e=Object(X.g)().address;return c.a.createElement(Oe,{address:e||""})};var Ce,Ne=function(){var e=Object(X.g)(),t=e.address,n=e.name;return c.a.createElement(Oe,{address:t||"",name:n})},Ae=function(){return c.a.createElement(_.a,{basename:"/"},c.a.createElement(se,null),c.a.createElement(K,null),c.a.createElement(X.c,null,c.a.createElement(X.a,{exact:!0,path:"/",component:ie}),c.a.createElement(X.a,{exact:!0,path:"/contract/:address",component:ke}),c.a.createElement(X.a,{path:"/contract/:address/details/:name",component:Ne})))},Be=document.getElementById("root");Ce=Ae,l.a.render(c.a.createElement(b,null,c.a.createElement(A,{config:i},c.a.createElement(Q,null,c.a.createElement(Ce,null)))),Be),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[246,1,2]]]);
//# sourceMappingURL=main.4c46be8e.chunk.js.map