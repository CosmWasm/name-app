(this["webpackJsonpname-app"]=this["webpackJsonpname-app"]||[]).push([[0],{136:function(e,t){},190:function(e,t,n){e.exports=n(341)},199:function(e,t){},210:function(e,t){},212:function(e,t){},259:function(e,t){},329:function(e,t){},341:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(0),a=n.n(r),c=n(12),o=n.n(c),i=n(82),l=n(8),u=n.n(l),s=n(21),m=n(20),d=n(177),f=n(48),p=n(41);function h(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var n=p.Bip39.encode(p.Random.getBytes(16)).toString();return localStorage.setItem(e,n),n}function v(){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(u.a.mark((function e(){var t,n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h(),e.next=3,f.Secp256k1Pen.fromMnemonic(t);case 3:return n=e.sent,r=Object(f.encodeSecp256k1Pubkey)(n.pubkey),a=Object(f.encodeAddress)(r,"cosmos"),c=function(e){return n.sign(e)},e.abrupt("return",{address:a,signer:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(s.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.address,a=n.signer,c=new f.SigningCosmWasmClient(t,r,a),e.abrupt("return",{address:r,client:c});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b={httpUrl:"https://lcd.demo.cosmwasm.com",faucetUrl:"https://faucet.demo.cosmwasm.com/credit"},y={loading:!0,address:"",getClient:function(){throw new Error("not yet initialized")},getRestClient:function(){throw new Error("not yet initialized")}},w=r.createContext(y),x=function(){return r.useContext(w)};function j(e){return r.createElement(O,{config:e.config,loadWallet:v},e.children)}function O(e){var t=Object(r.useState)(y),n=Object(m.a)(t,2),a=n[0],c=n[1],o=e.config,i=e.loadWallet;return Object(r.useEffect)((function(){i().then((function(e){return function(e,t){return E.apply(this,arguments)}(o.httpUrl,e)})).then(function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.address,r=t.client,!o.faucetUrl){e.next=11;break}return e.next=4,r.getAccount();case 4:if(null===(i=e.sent)||void 0===i?void 0:null===(a=i.coins)||void 0===a?void 0:a.length){e.next=11;break}return console.log("Hitting faucet"),e.next=9,d.a.post(o.faucetUrl,{json:{ticker:"COSM",address:n}});case 9:l=e.sent,console.log(l);case 11:s=new f.RestClient(o.httpUrl),c({loading:!1,address:n,getClient:function(){return r},getRestClient:function(){return s}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error: ".concat(e))}))}),[o.httpUrl,o.faucetUrl,i]),r.createElement(w.Provider,{value:a},e.children)}var k=n(384),C=n(79),S=n(370),U=n(374),_=n(375);function A(e){var t=x(),n=t.address,a=t.getClient,c=r.useState({}),o=Object(m.a)(c,2),l=o[0],u=o[1],s=l.account?l.account.coins.map((function(e){var t=e.amount,n=e.denom;return"".concat(t," ").concat(n)})).join(", ")||"(Empty Account)":l.error?l.error:"(Loading)";return r.useEffect((function(){a().getAccount().then((function(e){return u({account:e})})).catch((function(e){return u({error:"".concat(e)})}))}),[a]),r.createElement("div",null,r.createElement(S.a,null,r.createElement(U.a,null,r.createElement(C.a,{to:"/"},r.createElement(_.a,{edge:"start",color:"inherit"},r.createElement(k.a,null))),r.createElement(i.a,{variant:"h6"},n," - ",s))),r.createElement(U.a,null),e.children)}function W(){return r.createElement(i.a,{variant:"h2"},"Loading Wallet...")}var B=function(e){return x().loading?r.createElement(W,null):r.createElement(r.Fragment,null,e.children)},T=n(26),R=n(25),I=n(35),P=n(379),F=n(385),M=n(180),q=n.n(M),N=n(376),D=n(377),J=n(378);function L(e){var t=e.address,n=e.init_msg.name;return r.createElement(C.a,{to:"/contract/".concat(t)},r.createElement(N.a,null,r.createElement(D.a,null,r.createElement(F.a,null,r.createElement(q.a,null))),r.createElement(J.a,{primary:n,secondary:t})))}function z(){return(z=Object(s.a)(u.a.mark((function e(t,n){var r,a,c,o,i,l,s,m,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,t.listContractAddresses();case 3:a=e.sent,c=!0,o=!1,i=void 0,e.prev=7,l=a[Symbol.iterator]();case 9:if(c=(s=l.next()).done){e.next=18;break}return m=s.value,e.next=13,t.getContractInfo(m);case 13:(d=e.sent).code_id===n&&r.push(Object(I.a)({},d,{address:m}));case 15:c=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),o=!0,i=e.t0;case 24:e.prev=24,e.prev=25,c||null==l.return||l.return();case 27:if(e.prev=27,!o){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[7,20,24,32],[25,,27,31]])})))).apply(this,arguments)}var H=function(){var e=x().getRestClient,t=r.useState({contracts:[]}),n=Object(m.a)(t,2),a=n[0],c=n[1];return r.useEffect((function(){(function(e,t){return z.apply(this,arguments)})(e(),2).then((function(e){return c({contracts:e})})).catch((function(e){return c({contracts:[],error:"".concat(e)})}))}),[e]),a.error?r.createElement(i.a,{color:"secondary",variant:"h6"},"Error: ",a.error):r.createElement(P.a,null,a.contracts.map((function(e){return r.createElement(L,Object.assign({},e,{key:e.address}))})))},Y=n(19),$=n(380),G=n(383),K=n(56),Q=n(2),V=n(381),X=function(e){var t=e.name,n=e.form,a=e.validate,c=e.onChanged,o=Object(Q.a)(e,["name","form","validate","onChanged"]),i=Object(K.a)(t,n,a),l=i.input,u=i.meta,s=u.error&&(u.touched||!u.pristine);return r.createElement(V.a,Object.assign({error:s,name:l.name,value:l.value,helperText:s?u.error:void 0,onChange:function(e){l.onChange(e),c&&c(e)},margin:"normal"},o))},Z=function(e){return function(t){if(t&&t.length<e)return"Must be longer than ".concat(e," characters")}};function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var a=!0,c=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var u=(0,i.value)(e,n,r);if(u)return u}}catch(s){c=!0,o=s}finally{try{a||null==l.return||l.return()}finally{if(c)throw o}}}}var te=function(e){return e?void 0:"Required"},ne=function(e){var t=Object(K.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,a=t.handleSubmit,c=t.submitting,o=t.invalid,i=Object(r.useMemo)((function(){return ee(te,Z(45))}),[]);return r.createElement("form",{onSubmit:a},r.createElement(G.a,{display:"block",marginTop:2,marginBottom:1},r.createElement(X,{label:"New Owner",placeholder:"cosmos1234567...",type:"text",form:n,required:!0,fullWidth:!0,name:"addressField",validate:i})),r.createElement(G.a,{width:120,display:"flex",justifyContent:"space-between"},r.createElement($.a,{fullWidth:!0,color:"primary",type:"submit",disabled:o||c},"Transfer")))};function re(e){var t=x(),n=t.address,a=t.getClient,c=function(){var t=Object(s.a)(u.a.mark((function t(){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract.purchase_price,c=r?[r]:void 0,console.log("buying"),t.prev=3,t.next=6,a().execute(e.contractAddress,{register:{name:e.name}},"Buying my name",c);case 6:console.log("Purchased"),e.onUpdate&&e.onUpdate(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log("Purchase failed: ".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=Object(s.a)(u.a.mark((function t(n){var r,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract.transfer_price,c=r?[r]:void 0,o=n.addressField,console.log("transfering"),t.prev=4,t.next=7,a().execute(e.contractAddress,{transfer:{name:e.name,to:o}},"Transferring my name",c);case 7:console.log("Transferred"),e.onUpdate&&e.onUpdate(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("Transfer failed: ".concat(t.t0));case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}();return e.owner?e.owner===n?r.createElement("div",null,r.createElement(i.a,{color:"secondary",variant:"h6"},"You own ",e.name),r.createElement("span",null,"Do you want to transfer it?"),r.createElement(ne,{onSubmit:o})):r.createElement("div",null,r.createElement(i.a,{color:"secondary",variant:"h6"},e.name," is owned"),r.createElement("span",null,"Owned by: ",e.owner)):r.createElement("div",null,r.createElement(i.a,{variant:"h6"},e.name," is free"),r.createElement($.a,{color:"primary",type:"button",onClick:c},"Buy"))}var ae=function(e){var t=Object(K.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,a=t.handleSubmit,c=t.submitting,o=t.invalid,i=Object(r.useMemo)((function(){return ee(te,Z(4))}),[]);return r.createElement("form",{onSubmit:a},r.createElement(G.a,{display:"block",marginTop:2,marginBottom:1},r.createElement(X,{label:"Name",placeholder:"Name",type:"text",form:n,required:!0,fullWidth:!0,name:"nameField",validate:i})),r.createElement(G.a,{width:120,display:"flex",justifyContent:"space-between"},r.createElement($.a,{color:"primary",fullWidth:!0,type:"submit",disabled:o||c},"Search")))},ce={code_id:0,creator:"",init_msg:{name:""}};function oe(e){return e?"".concat(e.amount," ").concat(e.denom):"0"}var ie=function(e){var t=e.address,n=x(),a=n.getClient,c=n.getRestClient,o=r.useState(ce),l=Object(m.a)(o,2),u=l[0],s=l[1],d=r.useState({loading:!1}),f=Object(m.a)(d,2),p=f[0],h=f[1];return r.useEffect((function(){c().getContractInfo(t).then((function(e){return s(e)})).catch((function(e){return s(Object(I.a)({},ce,{error:"".concat(e)}))}))}),[c,t]),r.useEffect((function(){p.name&&a().queryContractSmart(t,{resolverecord:{name:p.name}}).then((function(e){var t,n=(t=e,JSON.parse(Y.Encoding.fromUtf8(t)));h({name:p.name,owner:n.address,loading:!1})})).catch((function(e){console.log(e),h({name:p.name,loading:!1})}))}),[a,t,p.name]),u.error?r.createElement(i.a,{color:"secondary",variant:"h6"},"Error: ",u.error):r.createElement("div",null,r.createElement(i.a,{variant:"h5"},'Details of name service "',u.init_msg.name,'":'),r.createElement("ul",null,r.createElement("li",null,"Code ID: ",u.code_id),r.createElement("li",null,"Address: ",t),r.createElement("li",null,"Purchase price: ",oe(u.init_msg.purchase_price)),r.createElement("li",null,"Transfer price: ",oe(u.init_msg.transfer_price))),r.createElement(ae,{onSubmit:function(e){h({name:e.nameField,loading:!0})}}),r.createElement("hr",null),p.name?p.loading?r.createElement("div",null,"Loading..."):r.createElement(re,{contractAddress:t,name:p.name,owner:p.owner,contract:u.init_msg,onUpdate:function(e){h(Object(I.a)({},p,{owner:e}))}}):"")};var le,ue=function(){var e=Object(R.f)().address;return a.a.createElement(ie,{address:e||""})},se=Object(T.a)(),me=function(){return a.a.createElement(R.b,{history:se},a.a.createElement(A,null,a.a.createElement(R.c,null,a.a.createElement(R.a,{exact:!0,path:"/",component:H}),a.a.createElement(R.a,{exact:!0,path:"/contract/:address",component:ue}))))},de=document.getElementById("root");le=me,o.a.render(a.a.createElement(j,{config:b},a.a.createElement(B,null,a.a.createElement(le,null))),de),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.900f7882.chunk.js.map