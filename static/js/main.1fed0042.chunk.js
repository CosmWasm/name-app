(this["webpackJsonpname-app"]=this["webpackJsonpname-app"]||[]).push([[0],{135:function(e,t){},190:function(e,t,n){e.exports=n(341)},199:function(e,t){},210:function(e,t){},212:function(e,t){},259:function(e,t){},329:function(e,t){},341:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,a=n(0),c=n.n(a),o=n(12),l=n.n(o),i={httpUrl:"https://lcd.demo.cosmwasm.com",faucetUrl:"https://faucet.demo.cosmwasm.com/credit",codeId:2},u=n(17),s=function(e){r=e.error};function m(e){console.log("Set error: ".concat(e));var t="string"===typeof e?e:e.toString();s({error:t})}function d(){console.log("Clear error"),s({})}var f=a.createContext({setError:m,clearError:d}),v=function(){return a.useContext(f)};function p(e){console.log("Re-render ErrorProvider");var t=a.useState({}),n=Object(u.a)(t,2),c=n[0],o=n[1];s=o,r&&(o({error:r}),r=void 0);var l={error:c.error,setError:m,clearError:d};return a.createElement(f.Provider,{value:l},e.children)}var E=n(8),g=n.n(E),h=n(22),b=n(176),y=n(50),w=n(41);function x(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var n=w.Bip39.encode(w.Random.getBytes(16)).toString();return localStorage.setItem(e,n),n}function j(){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(g.a.mark((function e(){var t,n,r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(),e.next=3,y.Secp256k1Pen.fromMnemonic(t);case 3:return n=e.sent,r=Object(y.encodeSecp256k1Pubkey)(n.pubkey),a=Object(y.encodeAddress)(r,"cosmos"),c=function(e){return n.sign(e)},e.abrupt("return",{address:a,signer:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(h.a)(g.a.mark((function e(t,n){var r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.address,a=n.signer,c=new y.SigningCosmWasmClient(t,r,a),e.abrupt("return",{address:r,client:c});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={loading:!0,address:"",getClient:function(){throw new Error("not yet initialized")},getRestClient:function(){throw new Error("not yet initialized")}},k=a.createContext(S),_=function(){return a.useContext(k)};function A(e){return a.createElement(R,{config:e.config,loadWallet:j},e.children)}function R(e){var t=Object(a.useState)(S),n=Object(u.a)(t,2),r=n[0],c=n[1],o=v().setError,l=e.config,i=e.loadWallet;return Object(a.useEffect)((function(){i().then((function(e){return function(e,t){return C.apply(this,arguments)}(l.httpUrl,e)})).then(function(){var e=Object(h.a)(g.a.mark((function e(t){var n,r,a,o,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.address,r=t.client,!l.faucetUrl){e.next=11;break}return e.next=4,r.getAccount();case 4:if(null===(o=e.sent)||void 0===o?void 0:null===(a=o.coins)||void 0===a?void 0:a.length){e.next=11;break}return console.log("Hitting faucet"),e.next=9,b.a.post(l.faucetUrl,{json:{ticker:"COSM",address:n}});case 9:i=e.sent,console.log(i);case 11:u=new y.RestClient(l.httpUrl),c({loading:!1,address:n,getClient:function(){return r},getRestClient:function(){return u}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(o)}),[l.httpUrl,l.faucetUrl,i,o]),a.createElement(k.Provider,{value:r},e.children)}var W=n(377),B=n(374),U=Object(B.a)({root:{background:"#2196f3",color:"white"}});function I(e){var t=U();return a.createElement(W.a,Object.assign({className:t.root},e))}var N=n(82);function F(e){var t=e.error,n=e.clearError;return console.log("Render ErrorMessage"),a.createElement(N.a,{color:"secondary",variant:"h6",onClick:n},"Error: ",t)}var P=n(379),T=n(380),M=n(381),q=n(391),D=n(49);function J(e){var t=e.account,n=t?t.coins.map((function(e){var t=e.amount,n=e.denom;return"".concat(t," ").concat(n)})).join(", ")||"(Empty Account)":"(Loading Balance)",r=t?t.address:"(No Address)";return a.createElement(a.Fragment,null,a.createElement(P.a,null,a.createElement(T.a,null,a.createElement(D.b,{to:"/"},a.createElement(M.a,{edge:"start",color:"inherit"},a.createElement(q.a,null))),a.createElement(N.a,{variant:"h6"},r," - ",n))),a.createElement(T.a,null))}function L(){return a.createElement(N.a,{variant:"h2"},"Loading Wallet...")}var z=n(382),G=Object(B.a)({root:{flexGrow:1}});function H(e){var t=e.children,n=G();return a.createElement(z.a,{className:n.root,container:!0,spacing:3},a.createElement(z.a,{item:!0,xs:2}),a.createElement(z.a,{item:!0,xs:!0},t),a.createElement(z.a,{item:!0,xs:2}))}var Y=function(){var e=v(),t=e.error,n=e.clearError;return t?a.createElement(F,{error:t,clearError:n}):a.createElement("div",null)};var $=function(e){return _().loading?a.createElement(a.Fragment,null,a.createElement(L,null),a.createElement(Y,null)):a.createElement(H,null,e.children)},K=n(19),Q=n(38),V=n(386),X=n(390),Z=n(179),ee=n.n(Z),te=n(383),ne=n(384),re=n(385);function ae(e){var t=e.address,n=e.init_msg.name;return a.createElement(D.b,{to:"/contract/".concat(t)},a.createElement(te.a,null,a.createElement(ne.a,null,a.createElement(X.a,null,a.createElement(ee.a,null))),a.createElement(re.a,{primary:n,secondary:t})))}var ce=i.codeId;function oe(){return(oe=Object(h.a)(g.a.mark((function e(t,n){var r,a,c,o,l,i,u,s,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,t.listContractAddresses();case 3:a=e.sent,c=!0,o=!1,l=void 0,e.prev=7,i=a[Symbol.iterator]();case 9:if(c=(u=i.next()).done){e.next=18;break}return s=u.value,e.next=13,t.getContractInfo(s);case 13:(m=e.sent).code_id===n&&r.push(Object(Q.a)({},m,{address:s}));case 15:c=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),o=!0,l=e.t0;case 24:e.prev=24,e.prev=25,c||null==i.return||i.return();case 27:if(e.prev=27,!o){e.next=30;break}throw l;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[7,20,24,32],[25,,27,31]])})))).apply(this,arguments)}var le=function(){var e=_().getRestClient,t=v().setError,n=a.useState({contracts:[]}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){(function(e,t){return oe.apply(this,arguments)})(e(),ce).then((function(e){return o({contracts:e})})).catch(t)}),[e,t]),a.createElement(V.a,null,c.contracts.map((function(e){return a.createElement(ae,Object.assign({},e,{key:e.address}))})))};var ie=function(){var e=_().getClient,t=v().setError,n=a.useState({}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.useEffect((function(){e().getAccount().then((function(e){return o({account:e})})).catch(t)}),[e,t]),a.createElement(J,c)};function ue(e){return e?"".concat(e.amount," ").concat(e.denom):"0"}function se(e){return a.createElement(a.Fragment,null,a.createElement(N.a,{variant:"h5"},'Details of name service "',e.init_msg.name,'":'),a.createElement("ul",null,a.createElement("li",null,"Code ID: ",e.code_id),a.createElement("li",null,"Address: ",e.address),a.createElement("li",null,"Purchase price: ",ue(e.init_msg.purchase_price)),a.createElement("li",null,"Transfer price: ",ue(e.init_msg.transfer_price))))}var me=n(21),de=n(388),fe=n(57),ve=n(2),pe=n(387),Ee=function(e){var t=e.name,n=e.form,r=e.validate,c=e.onChanged,o=Object(ve.a)(e,["name","form","validate","onChanged"]),l=Object(fe.a)(t,n,r),i=l.input,u=l.meta,s=u.error&&(u.touched||!u.pristine);return a.createElement(pe.a,Object.assign({error:s,name:i.name,value:i.value,helperText:s?u.error:void 0,onChange:function(e){i.onChange(e),c&&c(e)},margin:"normal"},o))},ge=function(e){return function(t){if(t&&t.length<e)return"Must be longer than ".concat(e," characters")}};function he(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var a=!0,c=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var u=(0,l.value)(e,n,r);if(u)return u}}catch(s){c=!0,o=s}finally{try{a||null==i.return||i.return()}finally{if(c)throw o}}}}var be=function(e){return e?void 0:"Required"},ye=function(e){var t=Object(fe.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,r=t.handleSubmit,c=t.submitting,o=t.invalid,l=Object(a.useMemo)((function(){return he(be,ge(45))}),[]);return a.createElement("form",{onSubmit:r},a.createElement(de.a,{display:"block",marginTop:2,marginBottom:1},a.createElement(Ee,{label:"New Owner",placeholder:"cosmos1234567...",type:"text",form:n,required:!0,fullWidth:!0,name:"addressField",validate:l})),a.createElement(de.a,{width:120,display:"flex",justifyContent:"space-between"},a.createElement(I,{fullWidth:!0,color:"primary",type:"submit",disabled:o||c},"Transfer")))};function we(e){var t=e.name,n=e.contractAddress,r=_(),c=r.address,o=r.getClient,l=v().setError,i=a.useState({loading:!1}),s=Object(u.a)(i,2),m=s[0],d=s[1];a.useEffect((function(){d({loading:!0}),o().queryContractSmart(n,{resolverecord:{name:t}}).then((function(e){var t,n=(t=e,JSON.parse(me.Encoding.fromUtf8(t)));d({owner:n.address,loading:!1})})).catch((function(e){d({loading:!1}),e.toString().includes("NameRecord not found")||l(e)}))}),[o,l,n,t]);var f=function(){var t=Object(h.a)(g.a.mark((function t(){var r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract.purchase_price,a=r?[r]:void 0,console.log("buying"),t.prev=3,t.next=6,o().execute(n,{register:{name:e.name}},"Buying my name",a);case 6:console.log("Purchased"),d({owner:c,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),l(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(h.a)(g.a.mark((function t(n){var r,a,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract.transfer_price,a=r?[r]:void 0,c=n.addressField,d({loading:!0}),console.log("transfering"),t.prev=5,t.next=8,o().execute(e.contractAddress,{transfer:{name:e.name,to:c}},"Transferring my name",a);case 8:console.log("Transferred"),d({owner:c,loading:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),d({loading:!1}),l(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}();return m.owner?m.owner===c?a.createElement("div",null,a.createElement(N.a,{color:"secondary",variant:"h6"},"You own ",e.name),a.createElement("span",null,"Do you want to transfer it?"),a.createElement(ye,{onSubmit:p})):a.createElement("div",null,a.createElement(N.a,{color:"secondary",variant:"h6"},e.name," is owned"),a.createElement("span",null,"Owned by: ",m.owner)):a.createElement("div",null,a.createElement(N.a,{variant:"h6"},e.name," is free"),a.createElement(I,{color:"primary",type:"submit",onClick:f},"Buy"))}var xe=function(e){var t=Object(fe.b)({onSubmit:function(t){return e.onSubmit(t)}}),n=t.form,r=t.handleSubmit,c=t.submitting,o=t.invalid,l=Object(a.useMemo)((function(){return he(be,ge(4))}),[]);return a.createElement("form",{onSubmit:r},a.createElement(de.a,{display:"block",marginTop:2,marginBottom:1},a.createElement(Ee,{label:"Name",placeholder:"Name",type:"text",form:n,required:!0,fullWidth:!0,name:"nameField",validate:l})),a.createElement(de.a,{width:120,display:"flex",justifyContent:"space-between"},a.createElement(I,{color:"primary",fullWidth:!0,type:"submit",disabled:o||c},"Search")))},je={address:"",code_id:0,creator:"",init_msg:{name:""}};var Oe=function(e){var t=e.address,n=e.name,r=_().getRestClient,c=v().setError,o=Object(K.f)(),l=a.useState(je),i=Object(u.a)(l,2),s=i[0],m=i[1];return a.useEffect((function(){r().getContractInfo(t).then((function(e){return m(Object(Q.a)({},e,{address:t}))})).catch(c)}),[r,c,t]),console.log("ContractLogic with ".concat(n)),a.createElement("div",null,a.createElement(se,s),a.createElement(xe,{onSubmit:function(e){var n=e.nameField;o.push("/contract/".concat(t,"/details/").concat(n))}}),a.createElement("hr",null),n?a.createElement(we,{contractAddress:t,name:n,contract:s.init_msg}):"")};var Ce=function(){var e=Object(K.g)().address;return c.a.createElement(Oe,{address:e||""})};var Se,ke=function(){var e=Object(K.g)(),t=e.address,n=e.name;return c.a.createElement(Oe,{address:t||"",name:n})},_e=function(){return c.a.createElement(D.a,{basename:"/"},c.a.createElement(ie,null),c.a.createElement(Y,null),c.a.createElement(K.c,null,c.a.createElement(K.a,{exact:!0,path:"/",component:le}),c.a.createElement(K.a,{exact:!0,path:"/contract/:address",component:Ce}),c.a.createElement(K.a,{path:"/contract/:address/details/:name",component:ke})))},Ae=document.getElementById("root");Se=_e,l.a.render(c.a.createElement(p,null,c.a.createElement(A,{config:i},c.a.createElement($,null,c.a.createElement(Se,null)))),Ae),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.1fed0042.chunk.js.map